import React, { useEffect, useState } from "react";
import { useParams } from "react-router-dom";
import { useAppDispatch, useAppSelector } from "../../hooks/hooks";
import { fetchPostsFarmer } from "../../store/people/farmers-postsSlice";

const FarmersPosts: React.FC = () => {
  const dispatch = useAppDispatch();
  const { datas, isLoading, hasError } = useAppSelector(
    (state) => state.postsfarmer
  );
  useEffect(() => {
    dispatch(fetchPostsFarmer());
  }, [dispatch]);

  if (isLoading) return <p> Загрузка постов</p>;
  if (hasError) return <p> {hasError}</p>;
  return (
    <div>
      <p>Посты</p>
      {datas.map((posts) => (
        <ul key={posts.id}>
          <li> {posts.title}</li>
          <p> {posts.content}</p>
        </ul>
      ))}
    </div>
  );
};
export default FarmersPosts;
